---
interface Props {
	title?: string | undefined;
	description?: string | undefined;
	image?: string | undefined;
	type?: "website" | "article" | undefined;
	logo?: string | undefined;
}

const {
	title = "Jonathan Barbeau | Generative Artist",
	description = "I am an artist and developer using Javascript and the HTML5 Canvas as a medium creation",
	image = "/assets/og/profile.png",
	type = "website",
	logo = "/favicon.svg",
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
// Ensure image URL is absolute
const socialImageURL = image.startsWith("http") ? image : new URL(image.startsWith("/") ? image.slice(1) : image, Astro.site).toString();
// Ensure logo URL is absolute
const logoURL = logo.startsWith("http") ? logo : new URL(logo.startsWith("/") ? logo.slice(1) : logo, Astro.site).toString();

// Schema.org JSON-LD for AI and search engines
const siteUrl = Astro.site?.toString() ?? "https://jbarbeau.art";
const structuredData = {
	"@context": "https://schema.org",
	"@graph": [
		{
			"@type": "Person",
			"@id": `${siteUrl}#person`,
			"name": "Jonathan Barbeau",
			"url": siteUrl,
			"image": `${siteUrl.replace(/\/?$/, "")}/assets/og/profile.png`,
			"description": "Generative artist and creative developer based in Québec City, Canada. Creates digital and long-form generative art using JavaScript and the HTML5 Canvas.",
			"jobTitle": "Generative Artist",
			"email": "barbeau.jonathan@gmail.com",
			"sameAs": [
				"https://www.instagram.com/jbarbeau.art/",
				"https://jbarbeau.substack.com/",
			],
			"knowsAbout": ["Generative art", "Creative coding", "JavaScript", "Digital art"],
		},
		{
			"@type": "WebSite",
			"@id": `${siteUrl}#website`,
			"url": siteUrl,
			"name": "Jonathan Barbeau Art",
			"description": "Portfolio and presence of Jonathan Barbeau — generative artist based in Québec City. Digital collections, exhibitions, blog, and artist CV.",
			"publisher": { "@id": `${siteUrl}#person` },
			"inLanguage": ["en", "fr"],
		},
	],
};
---

<meta charset='UTF-8' />
<meta name='description' content={description} />
<meta name='viewport' content='width=device-width, initial-scale=1.0' />
<meta name='generator' content={Astro.generator} />

<link rel='canonical' href={canonicalURL} />

<!-- Open Graph / Facebook -->
<meta property='og:type' content={type} />
<meta property='og:url' content={canonicalURL} />
<meta property='og:title' content={title} />
<meta property='og:description' content={description} />
<meta property='og:image' content={socialImageURL} />
<meta property='og:image:width' content='1200' />
<meta property='og:image:height' content='630' />
<meta property='og:image:alt' content={title} />
<meta property='og:logo' content={logoURL} />
<meta property='og:site_name' content='Jonathan Barbeau Art' />
<meta property='og:locale' content='en_US' />

<!-- Twitter -->
<meta name='twitter:card' content='summary_large_image' />
<meta name='twitter:url' content={canonicalURL} />
<meta name='twitter:title' content={title} />
<meta name='twitter:description' content={description} />
<meta name='twitter:image' content={socialImageURL} />
<meta name='twitter:image:alt' content={title} />

<meta name='google-site-verification' content='M8Pb3okXpfj3exglz7LXpi4WDnxPADz-kx0tLInXbZ8' />

<!-- AI / LLM discoverability -->
<link rel='alternate' type='text/plain' href='/llms.txt' title='Structured info for AI (llms.txt)' />
<link rel='alternate' type='text/plain' href='/ai.txt' title='AI context (ai.txt)' />

<script type='application/ld+json' set:html={JSON.stringify(structuredData)} />

<title>{title}</title>

<link rel='icon' type='image/png' href='/favicon.png' />
<link rel='preconnect' href='https://fonts.googleapis.com' />
<link rel='preconnect' href='https://fonts.gstatic.com' crossorigin />
<link href='https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap' rel='stylesheet' />
<script is:inline>
	// This code is inlined in the head to make dark mode instant & blocking.
	const getThemePreference = () => {
		if (typeof localStorage !== "undefined" && localStorage.getItem("theme")) {
			return localStorage.getItem("theme");
		}
		return window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
	};
	const isDark = getThemePreference() === "dark";
	document.documentElement.classList[isDark ? "add" : "remove"]("theme-dark");

	if (typeof localStorage !== "undefined") {
		// Watch the document element and persist user preference when it changes.
		const observer = new MutationObserver(() => {
			const isDark = document.documentElement.classList.contains("theme-dark");
			localStorage.setItem("theme", isDark ? "dark" : "light");
		});
		observer.observe(document.documentElement, {attributes: true, attributeFilter: ["class"]});
	}
</script>
